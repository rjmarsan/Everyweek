<style>
	body {
		background: black;
	}

</style>
<img id="uploaded" src="http://myweek.rj.io.s3.amazonaws.com/i/customname.png"/>
<canvas id="canvas" width="200" height="200">
</canvas>

<script>
var canvas = document.getElementById('canvas');
if (canvas.getContext) {
	var ctx = canvas.getContext("2d");

	ctx.fillStyle = "rgb(200,200,0)";
	ctx.fillRect (10, 10, 55, 50);
	
	ctx.fillStyle = "rgba(200, 0, 0, 0.5)";
	ctx.fillRect (30, 30, 55, 50);
}

function uploadCanvas() {
	//upload(Base64Binary.decode(img));
	var data = {};
	data.name = "customname.png";
	data.canvas = document.getElementById('canvas').toDataURL("image/png");
	window.frames["uploadframe"].postMessage(data, "http://myweek.rj.io.s3.amazonaws.com");
	//upload(document.getElementById('uploaded'));
}

window.addEventListener("message", function(event) {
	console.log(event.data);
}, false);

</script>


<div id="invisible" style="display: none">
	<iframe name="uploadframe" src="http://myweek.rj.io.s3.amazonaws.com/upload.html" ></iframe>
</div>
<a href="javascript:uploadCanvas()">alternate js upload</a>

<a target="_blank" href="javascript:shareOnFb()"><img src="facebook.png" alt="share on facebook"/></a>
<a target="_blank" href="javascript:shareOnTwitter()"><img src="twitter.png" alt="share on twitter"/></a>
<a target="_blank" href="javascript:shareOnGplus()"><img src="gplus.png" alt="share on google plus"/></a>
<script type="text/javascript">
	<!--
	var shareurl = "http://weeks.rj.io/s?i=customimage";
	var text="My Weeks";
	function shareOnFb() {
		var encodedurl = encodeURI(shareurl);
		var encodedtext = encodeURI(text);
		window.open("http://www.facebook.com/sharer.php?u="+encodedurl+"&t="+encodedtext, "fbWindow", "status = 1, height = 600, width = 500, resizable = 0" )
	}
	function shareOnGplus() {
		var encodedurl = encodeURI(shareurl);
		var encodedtext = encodeURI(text);
		window.open("https://plus.google.com/share?url="+encodedurl, "twitterWindow", "status = 1, height = 600, width = 500, resizable = 0" )
	}
	function shareOnTwitter() {
		var encodedurl = encodeURI(shareurl);
		var encodedtext = encodeURI(text);
		window.open("https://twitter.com/intent/tweet?url="+encodedurl+"&text="+encodedtext+"&hashtags=everyweek", "twitterWindow", "status = 1, height = 600, width = 500, resizable = 0" )
	}
	//-->
</script>

<span class='st_googleplus_large' displayText='Google +'></span>
<span class='st_pinterest_large' displayText='Pinterest'></span>
<span class='st_email_large' displayText='Email'></span>



